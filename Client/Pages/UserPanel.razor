@using OpenOsp.Client.Enums
@using OpenOsp.Client.Components.UserPanel.Tables
@page "/userpanel"

<div class="card w-full min-w-screen-md shadow-2xl bg-base-200 bg-opacity-95">
  <div class="tabs w-full">
    <div @onclick="() => Mode = UserPanelMode.Members"
         class="tab tab-lg tab-lifted @(Mode == UserPanelMode.Members ? "tab-active" : string.Empty)">
      Members
    </div>
    <div @onclick="() => Mode = UserPanelMode.Equipment"
         class="tab tab-lg tab-lifted @(Mode == UserPanelMode.Equipment ? "tab-active" : string.Empty)">
      Equipment
    </div>
    <div @onclick="() => Mode = UserPanelMode.Actions"
         class="tab tab-lg tab-lifted @(Mode == UserPanelMode.Actions ? "tab-active" : string.Empty)">
      Actions
    </div>
  </div>
  <div class="card-body bg-base-100">
    @switch (Mode) {
      case UserPanelMode.Members:
        <CascadingValue Name="MarkedMembers" Value="@MarkedMembers">
          <MembersTable/>
        </CascadingValue>
        break;
      case UserPanelMode.Equipment:
        <CascadingValue Name="MarkedEquipment" Value="@MarkedEquipment">
          <EquipmentTable/>
        </CascadingValue>
        break;
      case UserPanelMode.Actions:
        <CascadingValue Name="MarkedActions" Value="@MarkedActions">
          <ActionsTable/>
        </CascadingValue>
        break;
    }
  </div>
</div>

@code {

  private UserPanelMode Mode { get; set; } = UserPanelMode.Members;

  private IEnumerable<int> MarkedActions { get; set; } = new HashSet<int>();

  private IEnumerable<int> MarkedEquipment { get; set; } = new HashSet<int>();

  private IEnumerable<int> MarkedMembers { get; set; } = new HashSet<int>();

}